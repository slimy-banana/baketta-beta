<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>baketta!</title>
    <link rel="stylesheet" href="/../../style.css">
</head>
<body>
    <div id="header"></div>
    <div id="select">
        <p>言語を選択</p>
        <ul>
            <li onclick="changeLang('jh')"><img src="/../../flag_tl.svg" alt="日変語"></li>
            <li onclick="changeLang('tel');"><img src="/../../flag_tel (1).svg" alt="テルン語"></li>
        </ul>
    </div>
    <main>
        <div id="content">読み込み中</div>
    </main>
    <script src="/../../script.js"></script>
    <script>
        var stage_lang = localStorage.getItem("stage_lang") || "Undecided";

        // HTMLを読み込む関数
        function loadStage() {
        const url = "/../../stage_" + stage_lang + ".html";
        fetch(url)
            .then(res => {
                if (!res.ok) throw new Error("読み込み失敗: " + url);
                return res.text();
            })
            .then(html => {
                document.getElementById("content").innerHTML = html;
            })
            .catch(err => {
            document.getElementById("content").innerHTML = "<p>読み込みエラー: " + err.message + "</p>";
            });
        }

        // 言語を切り替える関数
        function changeLang(lang) {
            stage_lang = lang;
            localStorage.setItem("stage_lang", lang);
            loadStage();  // contentを差し替え
        }

        // ページロード時に読み込む
        loadStage();
    </script>
</body>
</html>